{"version":3,"sources":["AvailableRooms.tsx","utils.tsx","CheckOutRow.tsx","PriceGrid.tsx","matrixReducer.ts","Slider.tsx","Filters.tsx","MarriottMatrix.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["AvailableRooms","props","hotels","useMemo","byName","Map","pricePoints","forEach","pricePoint","currentBest","get","hotelName","undefined","cheapestRate","pricePerNight","set","corporateRate","bookingLink","Array","from","values","sort","a","b","react_default","createElement","dialog","className","classNames","Classes","DARK","isOpen","visible","onClose","selectedSquare","dates","checkIn","checkOut","map","d","moment","format","renderTitle","htmlTable","interactive","hotel","key","onClick","openBookingLink","price","concat","window","open","formatDate","date","dayOfWeek","DEFAULT_HOTELS","datesToKey","stay","getStayLength","diff","pricePointIsWithinStayLengthRange","stayLengthRange","length","hotelIsWithinDistance","distanceRange","distance","datesAreChronological","first","second","dateIsInRange","dateStr","range","stringToDate","getPriceFromGrid","grid","PricePointMap","_Map","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","value","prototype","call","list","Error","push","wrapNativeSuper","toDate","CheckOutRow","checkInDates","getPrice","onClickCell","onMouseEnter","onHover","onMouseLeave","offHover","clickable","active","activeCheckIn","tint","shouldTint","getColorClass","renderDate","_formatDate","Fragment","getPricePercentile","percentile","PriceGrid","_useState","useState","_useState2","slicedToArray","setSelectedSquare","_useState3","_useState4","hoveredSquare","setHoveredSquare","useBlueprintTable","table","defaultColumnWidth","enableRowResizing","enableColumnResizing","enableMultipleSelection","loadingOptions","TableLoadingOption","CELLS","COLUMN_HEADERS","ROW_HEADERS","renderMode","RenderMode","BATCH","rowHeaderCellRenderer","rowIndex","rowHeaderCell","numRows","defaultRowHeight","column","checkOutDates","name","cellRenderer","renderColumns","bordered","condensed","CheckOutRow_CheckOutRow","onSelectSquare","getActiveCheckIn","shouldTintSquare","onHoverSquare","priceStr","toLocaleString","cell","stayOverlaps","selected","overlapper","thisSquare","rank","size","matrixReducer","state","action","type","objectSpread","byDates","pricePointsByDates","square","Slider","localValue","setLocalValue","labelSuffix","spreadableProps","objectWithoutProperties","rangeSlider","assign","labelRenderer","label","labelStepSize","stepSize","onChange","onRelease","Filters","Slider_Slider","min","max","maxDistance","selectedDistanceRange","onChangeDistanceRange","selectedStayLengthRange","maxStayLength","onChangeStayLengthRange","dateRangeInput","shortcuts","toDateString","parseDate","minDate","dateRange","maxDate","onChangeDateRange","bucketedHotels","bucket","react","ceiling","items","outOfRange","tooltip","content","disabled","controls","checked","onChangeHotelSelection","sortDates","MarriottMatrix","viewingAvailableRooms","setViewingAvailableRooms","_useReducer","useReducer","hotelToPricePoints","selectedHotelNames","Set","addPricePoint","has","add","includes","byHotel","ImmutableList","createInitialState","_useReducer2","dispatch","_useMemo","buckets","nameToHotel","anyHotelsSelected","array","Math","ceil","_useMemo2","useCallback","_useMemo3","stayDates","_pricePoint$stayDates","stayLength","_useMemo4","last","setDistanceRange","_useState5","_useState6","setDateRange","_useState7","_useState8","setStayLengthRange","useEffect","datesToPricePoints","priceGridMap","addPricePointToGrid","soldOut","_pricePoint$stayDates2","_i","_arr","pricePointWithPrice","datesString","bestPriceForStay","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","entries","Symbol","iterator","next","done","_ref3","_ref2","hotelForPricePoint","err","return","sortedPrices","toConsumableArray","_ref4","_ref5","_ref6","_ref7","mapWithRanks","_ref8","i","_ref9","dateString","Filters_Filters","renderFilters","PriceGrid_PriceGrid","renderTable","AvailableRooms_AvailableRooms","getPricePointsForStay","processScrapedPricePoint","_pricePoint$dates","booking_link","propertyCodeMatch","match","corporate_rate","price_per_night","sold_out","App","innerWidth","width","setWidth","handleResize","addEventListener","removeEventListener","useWindowWidth","MarriottMatrix_MarriottMatrix","prices","Boolean","location","hostname","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.5f480c65.chunk.js","sourcesContent":["import React, { useMemo } from \"react\";\nimport { PricePointWithPrice, StayDates } from \"./types\";\nimport \"./AvailableRooms.scss\";\nimport { HTMLTable, Dialog, Classes } from \"@blueprintjs/core\";\nimport moment from \"moment\";\nimport classNames from \"classnames\";\n\ninterface Props {\n  visible: boolean;\n  pricePoints?: PricePointWithPrice[];\n  selectedSquare?: StayDates;\n  onClose: () => void;\n}\n\ninterface HotelPrice {\n  hotelName: string;\n  cheapestRate?: number;\n  corporateRate: boolean;\n  bookingLink?: string;\n}\n\nfunction getRate(price: HotelPrice) {\n  if (price.cheapestRate === null) {\n    return \"No Rate Available\";\n  }\n  return `$${price.cheapestRate} (${\n    price.corporateRate ? \"Corporate Rate\" : \"Regular Rate\"\n  })`;\n}\n\nexport const AvailableRooms: React.FC<Props> = (props: Props) => {\n  const hotels = useMemo(() => {\n    const byName = new Map<string, HotelPrice>();\n    if (props.pricePoints) {\n      props.pricePoints.forEach(pricePoint => {\n        const currentBest = byName.get(pricePoint.hotelName);\n        if (\n          currentBest === undefined ||\n          currentBest.cheapestRate === undefined ||\n          (pricePoint.pricePerNight !== undefined &&\n            pricePoint.pricePerNight < currentBest.cheapestRate)\n        ) {\n          byName.set(pricePoint.hotelName, {\n            hotelName: pricePoint.hotelName,\n            cheapestRate: pricePoint.pricePerNight,\n            corporateRate: pricePoint.corporateRate,\n            bookingLink: pricePoint.bookingLink\n          });\n        }\n      });\n    }\n    return Array.from(byName.values()).sort((a, b) => {\n      if (a.cheapestRate === null || a.cheapestRate === undefined) {\n        return 1;\n      } else if (b.cheapestRate === null || b.cheapestRate === undefined) {\n        return -1;\n      }\n      return a.cheapestRate - b.cheapestRate;\n    });\n  }, [props]);\n\n  return (\n    <Dialog\n      className={classNames(\"available-rooms\", Classes.DARK)}\n      isOpen={props.visible}\n      onClose={props.onClose}\n    >\n      {renderTitle()}\n      <p>Click on an option to book</p>\n      <div className=\"table-container\">\n        <HTMLTable className=\"table\" interactive>\n          <tbody>\n            {hotels.map(hotel => (\n              <tr key={hotel.hotelName} onClick={openBookingLink(hotel)}>\n                <td>{hotel.hotelName}</td>\n                <td>{getRate(hotel)}</td>\n              </tr>\n            ))}\n          </tbody>\n        </HTMLTable>\n      </div>\n    </Dialog>\n  );\n\n  function renderTitle() {\n    if (!props.selectedSquare) {\n      return null;\n    }\n    const dates = [\n      props.selectedSquare.checkIn,\n      props.selectedSquare.checkOut\n    ].map(d => moment(d).format(\"dddd, MMMM D, YYYY\"));\n\n    return (\n      <h3>\n        {dates[0]}\n        <span className=\"space\" />\n        —\n        <span className=\"space\" />\n        {dates[1]}\n      </h3>\n    );\n  }\n\n  function openBookingLink(hotel: HotelPrice) {\n    return () => {\n      if (hotel.bookingLink) {\n        window.open(hotel.bookingLink, \"_blank\");\n      }\n    };\n  }\n};\n","import moment from \"moment\";\nimport { PricePoint, Hotel, PriceGridData, StayDates } from \"./types\";\nimport { NumberRange } from \"@blueprintjs/core\";\nimport { DateRange } from \"@blueprintjs/datetime\";\n\nexport function formatDate(date: string) {\n  return {\n    dayOfWeek: moment(date).format(\"ddd\"),\n    date: moment(date).format(\"M/D\")\n  };\n}\n\nexport const DEFAULT_HOTELS: string[] = [\n  // \"The Ritz-Carlton Georgetown, Washington, D.C.\",\n  // \"The Westin Georgetown, Washington D.C.\",\n  // \"Washington Marriott Georgetown\",\n  // \"The Ritz-Carlton, Washington, DC\",\n  // \"The Mayflower Hotel, Autograph Collection\",\n  // \"The Westin Georgetown, Washington D.C.\"\n];\n\nexport function datesToKey(stay: StayDates): string {\n  return `${stay.checkIn}-${stay.checkOut}`;\n}\n\nexport function getLast<T>(array: T[]): T {\n  return array[array.length - 1];\n}\n\nexport function getStayLength(stay: StayDates) {\n  return moment(stay.checkOut).diff(moment(stay.checkIn), \"days\");\n}\n\nexport function pricePointIsWithinStayLengthRange(\n  stay: StayDates,\n  stayLengthRange: NumberRange\n) {\n  const length = getStayLength(stay);\n  return length >= stayLengthRange[0] && length <= stayLengthRange[1];\n}\n\nexport function hotelIsWithinDistance(\n  hotel: Hotel,\n  distanceRange: NumberRange\n) {\n  return (\n    hotel.distance >= distanceRange[0] && hotel.distance <= distanceRange[1]\n  );\n}\n\nexport function datesAreChronological(first?: Date, second?: Date): boolean {\n  if (!first || !second) {\n    return true;\n  }\n  return moment(second).diff(moment(first)) >= 0;\n}\n\nexport function dateIsInRange(dateStr: string, range: DateRange) {\n  const date = stringToDate(dateStr);\n  return (\n    datesAreChronological(range[0], date) &&\n    datesAreChronological(date, range[1])\n  );\n}\n\nexport function getPriceFromGrid(\n  grid: PriceGridData | undefined,\n  stay: StayDates\n) {\n  if (grid) {\n    const key = datesToKey(stay);\n    const pricePoint = grid.map.get(key);\n    return pricePoint && pricePoint.pricePerNight;\n  }\n}\n\nexport class PricePointMap<V extends PricePoint> extends Map<string, V[]> {\n  public addPricePoint(key: string, pricePoint: V) {\n    if (this.get(key) === undefined) {\n      super.set(key, []);\n    }\n    const list = super.get(key);\n    if (list === undefined) {\n      throw Error(`No list for key: ${key} in PricePointMap`);\n    }\n    list.push(pricePoint);\n    return this;\n  }\n\n  public set(): this {\n    throw Error(\n      \"Calling set() in a PricePointMap is disallowed. Use addPricePoint instead.\"\n    );\n  }\n}\n\nexport function stringToDate(date: string) {\n  return moment(date).toDate();\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport \"./CheckOutRow.scss\";\nimport { formatDate } from \"./utils\";\n\ninterface Props {\n  checkInDates: string[];\n  checkOut?: string;\n  activeCheckIn?: string;\n  getPrice?: (checkOut: string) => number | undefined;\n  shouldTint?: (checkIn: string) => boolean;\n  onClick?: (checkIn: string) => void;\n  getPricePercentile?: (checkIn: string) => number | undefined;\n  onHover?: (checkIn: string) => void;\n  offHover?: (checkIn: string) => void;\n}\n\nexport const CheckOutRow: React.FC<Props> = (props: Props) => {\n  return (\n    <tr>\n      {props.checkInDates.map(checkIn => {\n        if (props.getPrice && props.checkOut) {\n          const price = props.getPrice && props.getPrice(checkIn);\n          return (\n            <td\n              key={checkIn}\n              onClick={onClickCell(checkIn)}\n              onMouseEnter={() => props.onHover && props.onHover(checkIn)}\n              onMouseLeave={() => props.offHover && props.offHover(checkIn)}\n              className={classNames(\n                {\n                  clickable: price !== undefined,\n                  active: props.activeCheckIn === checkIn,\n                  tint: props.shouldTint && props.shouldTint(checkIn)\n                },\n                checkIn < props.checkOut ? getColorClass(checkIn) : \"impossible\"\n              )}\n            >\n              {price !== undefined && <p>{`$${price}`}</p>}\n            </td>\n          );\n        } else {\n          return (\n            <th\n              key={checkIn}\n              className={classNames(\n                \"checkin-date\",\n                props.shouldTint && props.shouldTint(checkIn) && \"tint\"\n              )}\n            >\n              {renderDate(checkIn)}\n            </th>\n          );\n        }\n      })}\n      {props.checkOut && <th>{renderDate(props.checkOut)}</th>}\n    </tr>\n  );\n\n  function renderDate(dateStr: string) {\n    const { dayOfWeek, date } = formatDate(dateStr);\n    return (\n      <>\n        <p>{dayOfWeek}</p>\n        <p>{date}</p>\n      </>\n    );\n  }\n\n  function onClickCell(checkIn: string) {\n    return () => props.onClick && props.onClick(checkIn);\n  }\n\n  function getColorClass(checkIn: string) {\n    if (!props.getPricePercentile) {\n      return;\n    }\n    const percentile = props.getPricePercentile(checkIn);\n    if (percentile === undefined) {\n      return \"no-price\";\n    }\n    if (percentile >= 0.9) {\n      return \"cost-1\";\n    } else if (percentile > 0.7) {\n      return \"cost-2\";\n    } else if (percentile > 0.3) {\n      return \"cost-3\";\n    } else if (percentile > 0.1) {\n      return \"cost-4\";\n    } else {\n      return \"cost-5\";\n    }\n  }\n};\n","import React, { useState } from \"react\";\nimport {\n  Cell,\n  Column,\n  Table,\n  TableLoadingOption,\n  RenderMode,\n  RowHeaderCell\n} from \"@blueprintjs/table\";\nimport { PriceGridData, StayDates } from \"./types\";\nimport \"./PriceGrid.scss\";\nimport { formatDate, getPriceFromGrid, datesToKey } from \"./utils\";\nimport { HTMLTable } from \"@blueprintjs/core\";\nimport { CheckOutRow } from \"./CheckOutRow\";\nimport { DateRange } from \"@blueprintjs/datetime\";\n\ninterface Props {\n  grid?: PriceGridData;\n  useBlueprintTable: boolean;\n  onSelectSquare: (square: StayDates) => void;\n  dateRange: DateRange;\n}\n\nexport const PriceGrid: React.FC<Props> = (props: Props) => {\n  const [selectedSquare, setSelectedSquare] = useState<StayDates | undefined>(\n    undefined\n  );\n  const [hoveredSquare, setHoveredSquare] = useState<StayDates | undefined>(\n    undefined\n  );\n\n  if (props.useBlueprintTable) {\n    return (\n      <Table\n        defaultColumnWidth={85}\n        enableRowResizing={false}\n        enableColumnResizing={false}\n        enableMultipleSelection={false}\n        loadingOptions={\n          !props.grid\n            ? [\n                TableLoadingOption.CELLS,\n                TableLoadingOption.COLUMN_HEADERS,\n                TableLoadingOption.ROW_HEADERS\n              ]\n            : []\n        }\n        renderMode={RenderMode.BATCH}\n        rowHeaderCellRenderer={renderRowHeader}\n        numRows={props.grid ? props.grid.checkInDates.length : 25}\n        defaultRowHeight={25}\n      >\n        {renderColumns()}\n      </Table>\n    );\n  } else {\n    if (!props.grid) {\n      return null;\n    }\n    return (\n      <div className=\"grid\">\n        <div>\n          <p>\n            <i>Check in:</i>\n          </p>\n          <HTMLTable bordered condensed className=\"table-header\">\n            <thead>\n              <CheckOutRow checkInDates={props.grid.checkInDates} />\n            </thead>\n          </HTMLTable>\n          <div className=\"table-container\">\n            <HTMLTable bordered condensed className=\"html-table\">\n              <tbody>{props.grid.checkOutDates.map(renderRow)}</tbody>\n            </HTMLTable>\n          </div>\n        </div>\n        <i className=\"checkout-text\">Check out:</i>\n      </div>\n    );\n  }\n\n  function renderRow(checkOut: string) {\n    if (!props.grid) {\n      return null;\n    }\n    return (\n      <CheckOutRow\n        key={checkOut}\n        checkOut={checkOut}\n        checkInDates={props.grid.checkInDates}\n        getPrice={getPrice(checkOut)}\n        onClick={onSelectSquare(checkOut)}\n        activeCheckIn={getActiveCheckIn(checkOut)}\n        getPricePercentile={getPricePercentile(checkOut)}\n        shouldTint={shouldTintSquare(checkOut)}\n        onHover={onHoverSquare(checkOut)}\n        offHover={onUnhoverSquare()}\n      />\n    );\n  }\n\n  function renderRowHeader(rowIndex: number) {\n    if (props.grid) {\n      return (\n        <RowHeaderCell className=\"row-header\">\n          {formatDate(props.grid.checkInDates[rowIndex]).date}\n        </RowHeaderCell>\n      );\n    }\n    return <RowHeaderCell>{rowIndex}</RowHeaderCell>;\n  }\n\n  function renderColumns() {\n    if (!props.grid) {\n      return <Column />;\n    }\n    return props.grid.checkOutDates.map(checkOut => {\n      return (\n        <Column\n          key={checkOut}\n          name={formatDate(checkOut).date}\n          cellRenderer={cellRenderer(checkOut)}\n        />\n      );\n    });\n  }\n\n  function cellRenderer(checkOut: string) {\n    return (rowIndex: number) => {\n      let priceStr = \"\";\n      if (props.grid) {\n        const checkIn = props.grid.checkInDates[rowIndex];\n        const price = getPriceFromGrid(props.grid, { checkIn, checkOut });\n        if (price !== undefined) {\n          priceStr = `$${price.toLocaleString()}`;\n        }\n      }\n      return <Cell>{priceStr}</Cell>;\n    };\n  }\n\n  function getPrice(checkOut: string) {\n    return (checkIn: string) => {\n      return getPriceFromGrid(props.grid, { checkIn, checkOut });\n    };\n  }\n\n  function onSelectSquare(checkOut: string) {\n    return (checkIn: string) => {\n      if (getPriceFromGrid(props.grid, { checkIn, checkOut }) === undefined) {\n        return;\n      }\n      setSelectedSquare({ checkIn, checkOut });\n      props.onSelectSquare && props.onSelectSquare({ checkIn, checkOut });\n    };\n  }\n\n  function onHoverSquare(checkOut: string) {\n    return (checkIn: string) => setHoveredSquare({ checkIn, checkOut });\n  }\n\n  function onUnhoverSquare() {\n    return () => setHoveredSquare(undefined);\n  }\n\n  function stayOverlaps(selected: StayDates, overlapper: StayDates) {\n    if (selected.checkIn === overlapper.checkIn) {\n      return selected.checkOut >= overlapper.checkOut;\n    }\n    if (selected.checkOut === overlapper.checkOut) {\n      return selected.checkIn <= overlapper.checkIn;\n    }\n    return false;\n  }\n\n  function shouldTintSquare(checkOut: string) {\n    return (checkIn: string): boolean => {\n      return (\n        (!!hoveredSquare &&\n          stayOverlaps(hoveredSquare, { checkIn, checkOut })) ||\n        (!!selectedSquare &&\n          stayOverlaps(selectedSquare, { checkIn, checkOut }))\n      );\n    };\n  }\n\n  function getActiveCheckIn(checkOut: string) {\n    if (!selectedSquare) {\n      return;\n    }\n    if (checkOut === selectedSquare.checkOut) {\n      return selectedSquare.checkIn;\n    }\n  }\n\n  function getPricePercentile(checkOut: string) {\n    return (checkIn: string): number | undefined => {\n      if (!props.grid) {\n        return;\n      }\n      const thisSquare = props.grid.map.get(datesToKey({ checkIn, checkOut }));\n      if (thisSquare !== undefined) {\n        return (thisSquare.rank - 1) / (props.grid.map.size - 1);\n      }\n    };\n  }\n};\n","import { List as ImmutableList } from \"immutable\";\nimport {\n  PriceGridData,\n  Hotel,\n  PricePoint,\n  PricePointWithPrice,\n  StayDates\n} from \"./types\";\n\nexport interface MatrixState {\n  pricePoints: {\n    byDates?: Map<string, PricePointWithPrice[]>;\n    byHotel: Map<string, PricePoint[]>;\n  };\n  grid?: PriceGridData;\n  hotels: ImmutableList<Hotel>;\n  selectedSquare?: StayDates;\n}\n\nexport interface LoadPricesAction {\n  type: \"LOAD_PRICES\";\n  grid: PriceGridData;\n  pricePointsByDates: Map<string, PricePointWithPrice[]>;\n}\n\nexport interface ToggleHotelSelection {\n  type: \"TOGGLE_HOTEL_SELECTION\";\n  hotel: Hotel;\n}\nexport interface SelectSquareAction {\n  type: \"SELECT_SQUARE\";\n  square: StayDates;\n}\n\nexport type Action =\n  | LoadPricesAction\n  | SelectSquareAction\n  | ToggleHotelSelection;\n\nexport function matrixReducer(state: MatrixState, action: Action): MatrixState {\n  switch (action.type) {\n    case \"LOAD_PRICES\":\n      return {\n        ...state,\n        grid: action.grid,\n        pricePoints: {\n          ...state.pricePoints,\n          byDates: action.pricePointsByDates\n        }\n      };\n    case \"SELECT_SQUARE\":\n      return {\n        ...state,\n        selectedSquare: action.square\n      };\n    case \"TOGGLE_HOTEL_SELECTION\":\n      return {\n        ...state,\n        hotels: state.hotels.map(hotel => ({\n          ...hotel,\n          selected:\n            hotel.name === action.hotel.name ? !hotel.selected : hotel.selected\n        }))\n      };\n  }\n}\n","import React, { useState } from \"react\";\nimport { NumberRange, RangeSlider, IRangeSliderProps } from \"@blueprintjs/core\";\nimport \"./Slider.scss\";\n\ninterface Props extends IRangeSliderProps {\n  value: NumberRange;\n  labelSuffix?: string;\n}\n\nexport const Slider: React.FC<Props> = (props: Props) => {\n  const [localValue, setLocalValue] = useState<NumberRange>(props.value);\n  const { value, labelSuffix, ...spreadableProps } = props;\n  return (\n    <div>\n      <RangeSlider\n        className=\"slider\"\n        labelRenderer={label => (\n          <span className=\"no-wrap\">\n            {label.toLocaleString() + (labelSuffix || \"\")}\n          </span>\n        )}\n        labelStepSize={1}\n        stepSize={0.1}\n        {...spreadableProps}\n        value={localValue}\n        onChange={onChange}\n        onRelease={onRelease}\n      />\n    </div>\n  );\n\n  function onRelease(value: NumberRange) {\n    setLocalValue(value);\n    props.onRelease && props.onRelease(value);\n  }\n\n  function onChange(value: NumberRange) {\n    setLocalValue(value);\n    props.onChange && props.onChange(value);\n  }\n};\n","import React, { Fragment } from \"react\";\nimport { Hotel, Bucket } from \"./types\";\nimport { Slider } from \"./Slider\";\nimport { Tooltip, Checkbox, NumberRange } from \"@blueprintjs/core\";\nimport { DateRangeInput, DateRange } from \"@blueprintjs/datetime\";\nimport { stringToDate, hotelIsWithinDistance } from \"./utils\";\nimport \"./Filters.scss\";\n\ninterface Props {\n  bucketedHotels: Bucket<Hotel>[];\n  onChangeDateRange: (newRange: DateRange) => void;\n  onChangeDistanceRange: (newRange: NumberRange) => void;\n  onChangeStayLengthRange: (newRange: NumberRange) => void;\n  onChangeHotelSelection: (hotel: Hotel) => void;\n\n  selectedDistanceRange: NumberRange;\n  maxDistance: number;\n\n  selectedStayLengthRange: NumberRange;\n  maxStayLength: number;\n\n  dateRange: DateRange;\n}\n\nexport const Filters: React.FC<Props> = (props: Props) => {\n  return (\n    <div className=\"filters\">\n      <h3>Filters</h3>\n      <p>Distance from Georgetown</p>\n      <Slider\n        min={0}\n        max={props.maxDistance}\n        value={props.selectedDistanceRange}\n        onRelease={props.onChangeDistanceRange}\n        labelStepSize={5}\n        labelSuffix=\"mi\"\n      />\n      <p className=\"stay-length\">Stay Length</p>\n      <Slider\n        value={props.selectedStayLengthRange}\n        min={1}\n        max={props.maxStayLength}\n        stepSize={1}\n        labelStepSize={2}\n        labelSuffix=\" days\"\n        onRelease={props.onChangeStayLengthRange}\n      />\n      <div className=\"date-range-container\">\n        <DateRangeInput\n          className=\"date-range\"\n          shortcuts={false}\n          formatDate={date => date.toDateString()}\n          parseDate={stringToDate}\n          minDate={props.dateRange[0]}\n          maxDate={props.dateRange[1]}\n          onChange={props.onChangeDateRange}\n        />\n      </div>\n      <div className=\"hotels\">\n        {props.bucketedHotels.map(bucket => (\n          <Fragment key={`${bucket.ceiling}`}>\n            <h4>{`Under ${bucket.ceiling} ${\n              bucket.ceiling === 1 ? \"mile\" : \"miles\"\n            } away`}</h4>\n            {bucket.items.map(hotel => {\n              const outOfRange = !hotelIsWithinDistance(\n                hotel,\n                props.selectedDistanceRange\n              );\n              return (\n                <div key={hotel.name}>\n                  <Tooltip\n                    content=\"Hotel is not in the selected distance range\"\n                    disabled={!outOfRange}\n                  >\n                    <Checkbox\n                      checked={hotel.selected && !outOfRange}\n                      disabled={outOfRange}\n                      onChange={() => props.onChangeHotelSelection(hotel)}\n                      key={hotel.name}\n                      label={hotel.name}\n                    />\n                  </Tooltip>\n                </div>\n              );\n            })}\n          </Fragment>\n        ))}\n      </div>\n    </div>\n  );\n};\n","import { Classes, NumberRange } from \"@blueprintjs/core\";\nimport { List as ImmutableList } from \"immutable\";\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useReducer,\n  useState\n} from \"react\";\nimport { AvailableRooms } from \"./AvailableRooms\";\nimport { PriceGrid } from \"./PriceGrid\";\nimport \"./MarriottMatrix.scss\";\nimport { matrixReducer, MatrixState } from \"./matrixReducer\";\nimport {\n  Bucket,\n  Hotel,\n  PriceGridMap,\n  PricePoint,\n  PricePointWithPrice,\n  StayDates\n} from \"./types\";\nimport {\n  datesToKey,\n  DEFAULT_HOTELS,\n  getLast,\n  hotelIsWithinDistance,\n  dateIsInRange,\n  PricePointMap,\n  pricePointIsWithinStayLengthRange,\n  getStayLength,\n  stringToDate\n} from \"./utils\";\nimport { Filters } from \"./Filters\";\nimport { DateRange } from \"@blueprintjs/datetime\";\nimport classNames from \"classnames\";\n\nfunction sortDates(dates: Set<string>): string[] {\n  return Array.from(dates).sort();\n}\n\ninterface Props {\n  pricePoints: PricePoint[];\n}\n\nfunction createInitialState(props: Props): MatrixState {\n  const hotelToPricePoints = new PricePointMap();\n  const selectedHotelNames = new Set<string>();\n  const hotels: Hotel[] = [];\n  props.pricePoints.forEach(pricePoint => {\n    const name = pricePoint.hotelName;\n\n    hotelToPricePoints.addPricePoint(name, pricePoint);\n\n    if (!selectedHotelNames.has(name)) {\n      selectedHotelNames.add(name);\n      hotels.push({\n        name: name,\n        distance: pricePoint.distance,\n        selected: DEFAULT_HOTELS.includes(name)\n      });\n    }\n  });\n\n  hotels.sort((a, b) => a.distance - b.distance);\n\n  return {\n    pricePoints: {\n      byHotel: hotelToPricePoints\n    },\n    hotels: ImmutableList(hotels)\n  };\n}\n\nexport const MarriottMatrix: React.FC<Props> = (props: Props) => {\n  const [viewingAvailableRooms, setViewingAvailableRooms] = useState(false);\n\n  const [state, dispatch] = useReducer(\n    matrixReducer,\n    createInitialState(props)\n  );\n\n  const [bucketedHotels, nameToHotel, anyHotelsSelected] = useMemo(() => {\n    const hotels = state.hotels;\n    const buckets: Bucket<Hotel>[] = [];\n    const nameToHotel = new Map<string, Hotel>();\n    let anyHotelsSelected = false;\n\n    hotels.forEach(hotel => {\n      nameToHotel.set(hotel.name, hotel);\n      anyHotelsSelected = anyHotelsSelected || hotel.selected;\n      if (\n        buckets.length === 0 ||\n        hotel.distance > buckets[buckets.length - 1].ceiling\n      ) {\n        buckets.push({\n          ceiling: Math.ceil(hotel.distance),\n          items: [hotel]\n        });\n      } else {\n        getLast(buckets).items.push(hotel);\n      }\n    });\n\n    return [buckets, nameToHotel, anyHotelsSelected];\n  }, [state.hotels]);\n\n  const onSelectSquare = useCallback(\n    (square: StayDates) => {\n      setViewingAvailableRooms(true);\n      dispatch({\n        type: \"SELECT_SQUARE\",\n        square\n      });\n    },\n    [setViewingAvailableRooms, dispatch]\n  );\n\n  const [minDate, maxDate, maxStayLength] = useMemo(() => {\n    let minDate = props.pricePoints[0].stayDates.checkIn;\n    let maxDate = props.pricePoints[0].stayDates.checkOut;\n    let maxStayLength = 1;\n    props.pricePoints.forEach(pricePoint => {\n      const { checkIn, checkOut } = pricePoint.stayDates;\n      if (checkIn < minDate) {\n        minDate = checkIn;\n      }\n      if (checkOut > maxDate) {\n        maxDate = checkOut;\n      }\n\n      const stayLength = getStayLength(pricePoint.stayDates);\n      maxStayLength = Math.max(stayLength, maxStayLength);\n    });\n    return [minDate, maxDate, maxStayLength];\n  }, [props.pricePoints]);\n\n  const maxDistance = useMemo(\n    () => state.hotels.last({ distance: 5 }).distance,\n    [state.hotels]\n  );\n\n  const [distanceRange, setDistanceRange] = useState<NumberRange>([\n    0,\n    maxDistance\n  ]);\n  const [dateRange, setDateRange] = useState<DateRange>([\n    stringToDate(minDate),\n    stringToDate(maxDate)\n  ]);\n  const [stayLengthRange, setStayLengthRange] = useState<NumberRange>([\n    1,\n    maxStayLength\n  ]);\n\n  useEffect(() => {\n    const datesToPricePoints = new PricePointMap<PricePointWithPrice>();\n    const priceGridMap = new Map<string, PricePointWithPrice>();\n    const checkInDates = new Set<string>();\n    const checkOutDates = new Set<string>();\n\n    function addPricePointToGrid(pricePoint: PricePoint) {\n      const {\n        hotelName,\n        pricePerNight,\n        soldOut,\n        stayDates: { checkIn, checkOut }\n      } = pricePoint;\n\n      for (const date of [checkIn, checkOut]) {\n        if (!dateIsInRange(date, dateRange)) {\n          return;\n        }\n      }\n\n      checkInDates.add(checkIn);\n      checkOutDates.add(checkOut);\n\n      const hotel = nameToHotel.get(hotelName);\n      if (\n        !hotel ||\n        (anyHotelsSelected && !hotel.selected) ||\n        !hotelIsWithinDistance(hotel, distanceRange) ||\n        !pricePointIsWithinStayLengthRange(\n          pricePoint.stayDates,\n          stayLengthRange\n        )\n      ) {\n        return;\n      }\n\n      if (pricePerNight === null || pricePerNight === undefined || soldOut) {\n        return;\n      }\n\n      const pricePointWithPrice = {\n        ...pricePoint,\n        pricePerNight\n      };\n      const datesString = datesToKey({ checkIn, checkOut });\n      const bestPriceForStay = priceGridMap.get(datesString);\n      if (!bestPriceForStay || pricePerNight < bestPriceForStay.pricePerNight) {\n        priceGridMap.set(datesString, pricePointWithPrice);\n      }\n      datesToPricePoints.addPricePoint(datesString, pricePointWithPrice);\n    }\n\n    if (anyHotelsSelected) {\n      for (const [\n        hotelName,\n        pricePoints\n      ] of state.pricePoints.byHotel.entries()) {\n        const hotelForPricePoint = nameToHotel.get(hotelName);\n        if (\n          hotelForPricePoint &&\n          hotelForPricePoint.selected &&\n          hotelIsWithinDistance(hotelForPricePoint, distanceRange)\n        ) {\n          pricePoints.forEach(pricePoint => {\n            if (\n              pricePointIsWithinStayLengthRange(\n                pricePoint.stayDates,\n                stayLengthRange\n              )\n            ) {\n              addPricePointToGrid(pricePoint);\n            }\n          });\n        }\n      }\n    } else {\n      props.pricePoints.forEach(addPricePointToGrid);\n    }\n\n    // add ranks\n    const sortedPrices = [...priceGridMap.entries()].sort(\n      ([_, a], [__, b]) => a.pricePerNight - b.pricePerNight\n    );\n    const mapWithRanks: PriceGridMap = new Map();\n    sortedPrices.forEach(([dateString, _], i) => {\n      const pricePoint = priceGridMap.get(dateString);\n      if (pricePoint) {\n        mapWithRanks.set(dateString, {\n          ...pricePoint,\n          rank: i + 1\n        });\n      }\n    });\n\n    dispatch({\n      type: \"LOAD_PRICES\",\n      pricePointsByDates: datesToPricePoints,\n      grid: {\n        map: mapWithRanks,\n        checkInDates: sortDates(checkInDates),\n        checkOutDates: sortDates(checkOutDates)\n      }\n    });\n  }, [\n    props.pricePoints,\n    state.hotels,\n    dateRange,\n    distanceRange,\n    stayLengthRange,\n    anyHotelsSelected,\n    nameToHotel,\n    state.pricePoints.byHotel\n  ]);\n\n  return (\n    <div className={classNames(\"container\", Classes.DARK)}>\n      <div className=\"sidebar\">{renderFilters()}</div>\n      <div className=\"content\">\n        <h2>Marriott Matrix</h2>\n        {renderTable()}\n        <AvailableRooms\n          selectedSquare={state.selectedSquare}\n          pricePoints={getPricePointsForStay(state.selectedSquare)}\n          visible={viewingAvailableRooms}\n          onClose={() => setViewingAvailableRooms(false)}\n        />\n      </div>\n    </div>\n  );\n\n  function renderTable() {\n    if (!state.grid) {\n      return null;\n    }\n    return (\n      <PriceGrid\n        grid={state.grid}\n        dateRange={dateRange}\n        useBlueprintTable={false}\n        onSelectSquare={onSelectSquare}\n      />\n    );\n  }\n\n  function renderFilters() {\n    if (!state.grid) {\n      return null;\n    }\n    return (\n      <Filters\n        dateRange={[stringToDate(minDate), stringToDate(maxDate)]}\n        onChangeDateRange={setDateRange}\n        maxDistance={maxDistance}\n        selectedDistanceRange={distanceRange}\n        onChangeDistanceRange={setDistanceRange}\n        maxStayLength={maxStayLength}\n        selectedStayLengthRange={stayLengthRange}\n        onChangeStayLengthRange={setStayLengthRange}\n        bucketedHotels={bucketedHotels}\n        onChangeHotelSelection={hotel => {\n          dispatch({\n            type: \"TOGGLE_HOTEL_SELECTION\",\n            hotel\n          });\n        }}\n      />\n    );\n  }\n\n  function getPricePointsForStay(\n    stay?: StayDates\n  ): PricePointWithPrice[] | undefined {\n    if (!state.grid || !stay || !state.pricePoints.byDates) {\n      return [];\n    }\n    return state.pricePoints.byDates.get(datesToKey(stay));\n  }\n};\n","import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport { MarriottMatrix } from \"./MarriottMatrix\";\nimport prices from \"./prices.json\";\nimport { ScrapedPricePoint, PricePoint } from \"./types\";\nimport moment from \"moment\";\n\nfunction useWindowWidth() {\n  const [width, setWidth] = useState(window.innerWidth);\n\n  useEffect(() => {\n    const handleResize = () => setWidth(window.innerWidth);\n    window.addEventListener(\"resize\", handleResize);\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  });\n\n  return width;\n}\n\nfunction processScrapedPricePoint(pricePoint: ScrapedPricePoint): PricePoint {\n  const [checkIn, checkOut] = pricePoint.dates;\n\n  // TODO: url generation should be on backend\n  let bookingLink: string | undefined = undefined;\n  if (pricePoint.booking_link) {\n    const propertyCodeMatch = pricePoint.booking_link.match(\n      /propertyCode=([A-Z]+)&/\n    );\n    if (propertyCodeMatch === null) {\n      throw Error(\n        \"No property code match in booking link: \" + pricePoint.booking_link\n      );\n    }\n    const propertyCode = propertyCodeMatch[1];\n\n    bookingLink =\n      \"https://www.marriott.com/reservation/availabilitySearch.mi?&propertyCode=\" +\n      propertyCode +\n      \"&fromDate=\" +\n      moment(checkIn).format(\"MM/DD/YYYY\") +\n      \"&toDate=\" +\n      moment(checkOut).format(\"MM/DD/YYYY\") +\n      \"&numberOfRooms=1&numberOfGuests=1&currency=USD\";\n\n    if (pricePoint.corporate_rate) {\n      bookingLink += \"&clusterCode=corp&corporateCode=P5R\";\n    }\n  }\n\n  return {\n    hotelName: pricePoint.name,\n    stayDates: { checkIn, checkOut },\n    corporateRate: pricePoint.corporate_rate,\n    pricePerNight: pricePoint.price_per_night,\n    soldOut: pricePoint.sold_out,\n    distance: pricePoint.distance,\n    bookingLink\n  };\n}\n\nconst App: React.FC = () => {\n  const width = useWindowWidth();\n  if (width < 1000) {\n    return <p className=\"too-small\">Desktop only :-)</p>;\n  }\n  return <MarriottMatrix pricePoints={prices.map(processScrapedPricePoint)} />;\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}