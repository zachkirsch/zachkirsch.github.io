{"version":3,"sources":["AvailableRooms.tsx","utils.tsx","CheckOutRow.tsx","PriceGrid.tsx","matrixReducer.ts","Slider.tsx","Filters.tsx","MarriottMatrix.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["AvailableRooms","props","hotels","useMemo","byName","Map","pricePoints","forEach","pricePoint","currentBest","get","hotelName","undefined","cheapestRate","pricePerNight","set","corporateRate","bookingLink","Array","from","values","sort","a","b","react_default","createElement","dialog","className","classNames","Classes","DARK","isOpen","visible","title","onClose","selectedSquare","dates","checkIn","checkOut","map","d","moment","format","renderTitle","htmlTable","striped","interactive","hotel","key","onClick","openBookingLink","price","concat","window","open","formatDate","date","dayOfWeek","DEFAULT_HOTELS","datesToKey","stay","getStayLength","diff","pricePointIsWithinStayLengthRange","stayLengthRange","length","hotelIsWithinDistance","distanceRange","distance","datesAreChronological","first","second","dateIsInRange","dateStr","range","stringToDate","getPriceFromGrid","grid","PricePointMap","_Map","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","value","prototype","call","list","Error","push","wrapNativeSuper","toDate","CheckOutRow","checkInDates","getPrice","onClickCell","onMouseEnter","onHover","onMouseLeave","offHover","clickable","active","activeCheckIn","tint","shouldTint","getColorClass","renderDate","_formatDate","Fragment","getPricePercentile","percentile","TINT_AFTER_CLICKED","PriceGrid","_useState","useState","_useState2","slicedToArray","setSelectedSquare","_useState3","_useState4","hoveredSquare","setHoveredSquare","useBlueprintTable","table","defaultColumnWidth","enableRowResizing","enableColumnResizing","enableMultipleSelection","loadingOptions","TableLoadingOption","CELLS","COLUMN_HEADERS","ROW_HEADERS","renderMode","RenderMode","BATCH","rowHeaderCellRenderer","rowIndex","rowHeaderCell","numRows","defaultRowHeight","column","checkOutDates","name","cellRenderer","renderColumns","bordered","condensed","CheckOutRow_CheckOutRow","onSelectSquare","getActiveCheckIn","shouldTintSquare","onHoverSquare","priceStr","toLocaleString","cell","stayOverlaps","selected","overlapper","overlapsSelected","thisSquare","rank","size","matrixReducer","state","action","type","objectSpread","byDates","pricePointsByDates","square","Slider","localValue","setLocalValue","labelSuffix","spreadableProps","objectWithoutProperties","rangeSlider","assign","labelRenderer","label","labelStepSize","stepSize","onChange","onRelease","Filters","Slider_Slider","min","max","maxDistance","selectedDistanceRange","onChangeDistanceRange","selectedStayLengthRange","maxStayLength","onChangeStayLengthRange","dateRangeInput","shortcuts","toDateString","parseDate","minDate","dateRange","maxDate","onChangeDateRange","bucketedHotels","bucket","react","ceiling","items","outOfRange","tooltip","content","disabled","controls","checked","onChangeHotelSelection","sortDates","MarriottMatrix","viewingAvailableRooms","setViewingAvailableRooms","_useReducer","useReducer","hotelToPricePoints","selectedHotelNames","Set","addPricePoint","has","add","includes","byHotel","ImmutableList","createInitialState","_useReducer2","dispatch","_useMemo","buckets","nameToHotel","anyHotelsSelected","array","Math","ceil","_useMemo2","useCallback","_useMemo3","stayDates","_pricePoint$stayDates","stayLength","_useMemo4","last","setDistanceRange","_useState5","_useState6","setDateRange","_useState7","_useState8","setStayLengthRange","useEffect","datesToPricePoints","priceGridMap","addPricePointToGrid","soldOut","_pricePoint$stayDates2","_i","_arr","pricePointWithPrice","datesString","bestPriceForStay","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","entries","Symbol","iterator","next","done","_ref3","_ref2","hotelForPricePoint","err","return","sortedPrices","toConsumableArray","_ref4","_ref5","_ref6","_ref7","mapWithRanks","_ref8","i","_ref9","dateString","Filters_Filters","renderFilters","PriceGrid_PriceGrid","renderTable","AvailableRooms_AvailableRooms","getPricePointsForStay","processScrapedPricePoint","_pricePoint$dates","booking_link","propertyCodeMatch","match","corporate_rate","price_per_night","sold_out","App","innerWidth","width","setWidth","handleResize","addEventListener","removeEventListener","useWindowWidth","MarriottMatrix_MarriottMatrix","prices","Boolean","location","hostname","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.71c35f47.chunk.js","sourcesContent":["import React, { useMemo } from \"react\";\nimport { PricePointWithPrice, StayDates } from \"./types\";\nimport \"./AvailableRooms.scss\";\nimport { HTMLTable, Dialog, Classes } from \"@blueprintjs/core\";\nimport moment from \"moment\";\nimport classNames from \"classnames\";\n\ninterface Props {\n  visible: boolean;\n  pricePoints?: PricePointWithPrice[];\n  selectedSquare?: StayDates;\n  onClose: () => void;\n}\n\ninterface HotelPrice {\n  hotelName: string;\n  cheapestRate?: number;\n  corporateRate: boolean;\n  bookingLink?: string;\n}\n\nfunction getRate(price: HotelPrice) {\n  if (price.cheapestRate === null) {\n    return \"No Rate Available\";\n  }\n  return `$${price.cheapestRate} (${\n    price.corporateRate ? \"Corporate Rate\" : \"Regular Rate\"\n  })`;\n}\n\nexport const AvailableRooms: React.FC<Props> = (props: Props) => {\n  const hotels = useMemo(() => {\n    const byName = new Map<string, HotelPrice>();\n    if (props.pricePoints) {\n      props.pricePoints.forEach(pricePoint => {\n        const currentBest = byName.get(pricePoint.hotelName);\n        if (\n          currentBest === undefined ||\n          currentBest.cheapestRate === undefined ||\n          (pricePoint.pricePerNight !== undefined &&\n            pricePoint.pricePerNight < currentBest.cheapestRate)\n        ) {\n          byName.set(pricePoint.hotelName, {\n            hotelName: pricePoint.hotelName,\n            cheapestRate: pricePoint.pricePerNight,\n            corporateRate: pricePoint.corporateRate,\n            bookingLink: pricePoint.bookingLink\n          });\n        }\n      });\n    }\n    return Array.from(byName.values()).sort((a, b) => {\n      if (a.cheapestRate === null || a.cheapestRate === undefined) {\n        return 1;\n      } else if (b.cheapestRate === null || b.cheapestRate === undefined) {\n        return -1;\n      }\n      return a.cheapestRate - b.cheapestRate;\n    });\n  }, [props]);\n\n  return (\n    <Dialog\n      className={classNames(\"available-rooms\", Classes.DARK)}\n      isOpen={props.visible}\n      title={\"Available Rooms\"}\n      onClose={props.onClose}\n    >\n      {renderTitle()}\n      <p>Click on an option to book</p>\n      <div className=\"table-container\">\n        <HTMLTable className=\"table\" striped interactive>\n          <tbody>\n            {hotels.map(hotel => (\n              <tr key={hotel.hotelName} onClick={openBookingLink(hotel)}>\n                <td>{hotel.hotelName}</td>\n                <td>{getRate(hotel)}</td>\n              </tr>\n            ))}\n          </tbody>\n        </HTMLTable>\n      </div>\n    </Dialog>\n  );\n\n  function renderTitle() {\n    if (!props.selectedSquare) {\n      return null;\n    }\n    const dates = [\n      props.selectedSquare.checkIn,\n      props.selectedSquare.checkOut\n    ].map(d => moment(d).format(\"dddd, MMMM D, YYYY\"));\n\n    return (\n      <h3>\n        {dates[0]}\n        <span className=\"space\" />\n        —\n        <span className=\"space\" />\n        {dates[1]}\n      </h3>\n    );\n  }\n\n  function openBookingLink(hotel: HotelPrice) {\n    return () => {\n      if (hotel.bookingLink) {\n        window.open(hotel.bookingLink, \"_blank\");\n      }\n    };\n  }\n};\n","import moment from \"moment\";\nimport { PricePoint, Hotel, PriceGridData, StayDates } from \"./types\";\nimport { NumberRange } from \"@blueprintjs/core\";\nimport { DateRange } from \"@blueprintjs/datetime\";\n\nexport function formatDate(date: string) {\n  return {\n    dayOfWeek: moment(date).format(\"ddd\"),\n    date: moment(date).format(\"M/D\")\n  };\n}\n\nexport const DEFAULT_HOTELS: string[] = [\n  // \"The Ritz-Carlton Georgetown, Washington, D.C.\",\n  // \"The Westin Georgetown, Washington D.C.\",\n  // \"Washington Marriott Georgetown\",\n  // \"The Ritz-Carlton, Washington, DC\",\n  // \"The Mayflower Hotel, Autograph Collection\",\n  // \"The Westin Georgetown, Washington D.C.\"\n];\n\nexport function datesToKey(stay: StayDates): string {\n  return `${stay.checkIn}-${stay.checkOut}`;\n}\n\nexport function getLast<T>(array: T[]): T {\n  return array[array.length - 1];\n}\n\nexport function getStayLength(stay: StayDates) {\n  return moment(stay.checkOut).diff(moment(stay.checkIn), \"days\");\n}\n\nexport function pricePointIsWithinStayLengthRange(\n  stay: StayDates,\n  stayLengthRange: NumberRange\n) {\n  const length = getStayLength(stay);\n  return length >= stayLengthRange[0] && length <= stayLengthRange[1];\n}\n\nexport function hotelIsWithinDistance(\n  hotel: Hotel,\n  distanceRange: NumberRange\n) {\n  return (\n    hotel.distance >= distanceRange[0] && hotel.distance <= distanceRange[1]\n  );\n}\n\nexport function datesAreChronological(first?: Date, second?: Date): boolean {\n  if (!first || !second) {\n    return true;\n  }\n  return moment(second).diff(moment(first)) >= 0;\n}\n\nexport function dateIsInRange(dateStr: string, range: DateRange) {\n  const date = stringToDate(dateStr);\n  return (\n    datesAreChronological(range[0], date) &&\n    datesAreChronological(date, range[1])\n  );\n}\n\nexport function getPriceFromGrid(\n  grid: PriceGridData | undefined,\n  stay: StayDates\n) {\n  if (grid) {\n    const key = datesToKey(stay);\n    const pricePoint = grid.map.get(key);\n    return pricePoint && pricePoint.pricePerNight;\n  }\n}\n\nexport class PricePointMap<V extends PricePoint> extends Map<string, V[]> {\n  public addPricePoint(key: string, pricePoint: V) {\n    if (this.get(key) === undefined) {\n      super.set(key, []);\n    }\n    const list = super.get(key);\n    if (list === undefined) {\n      throw Error(`No list for key: ${key} in PricePointMap`);\n    }\n    list.push(pricePoint);\n    return this;\n  }\n\n  public set(): this {\n    throw Error(\n      \"Calling set() in a PricePointMap is disallowed. Use addPricePoint instead.\"\n    );\n  }\n}\n\nexport function stringToDate(date: string) {\n  return moment(date).toDate();\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport \"./CheckOutRow.scss\";\nimport { formatDate } from \"./utils\";\n\ninterface Props {\n  checkInDates: string[];\n  checkOut?: string;\n  activeCheckIn?: string;\n  getPrice?: (checkOut: string) => number | undefined;\n  shouldTint?: (checkIn: string) => boolean;\n  onClick?: (checkIn: string) => void;\n  getPricePercentile?: (checkIn: string) => number | undefined;\n  onHover?: (checkIn: string) => void;\n  offHover?: (checkIn: string) => void;\n}\n\nexport const CheckOutRow: React.FC<Props> = (props: Props) => {\n  return (\n    <tr>\n      {props.checkInDates.map(checkIn => {\n        if (props.getPrice && props.checkOut) {\n          const price = props.getPrice && props.getPrice(checkIn);\n          return (\n            <td\n              key={checkIn}\n              onClick={onClickCell(checkIn)}\n              onMouseEnter={() => props.onHover && props.onHover(checkIn)}\n              onMouseLeave={() => props.offHover && props.offHover(checkIn)}\n              className={classNames(\n                {\n                  clickable: price !== undefined,\n                  active: props.activeCheckIn === checkIn,\n                  tint: props.shouldTint && props.shouldTint(checkIn)\n                },\n                checkIn < props.checkOut ? getColorClass(checkIn) : \"impossible\"\n              )}\n            >\n              {price !== undefined && <p>{`$${price}`}</p>}\n            </td>\n          );\n        } else {\n          return (\n            <th\n              key={checkIn}\n              className={classNames(\n                \"checkin-date\",\n                props.shouldTint && props.shouldTint(checkIn) && \"tint\"\n              )}\n            >\n              {renderDate(checkIn)}\n            </th>\n          );\n        }\n      })}\n      {props.checkOut && <th>{renderDate(props.checkOut)}</th>}\n    </tr>\n  );\n\n  function renderDate(dateStr: string) {\n    const { dayOfWeek, date } = formatDate(dateStr);\n    return (\n      <>\n        <p>{dayOfWeek}</p>\n        <p>{date}</p>\n      </>\n    );\n  }\n\n  function onClickCell(checkIn: string) {\n    return () => props.onClick && props.onClick(checkIn);\n  }\n\n  function getColorClass(checkIn: string) {\n    if (!props.getPricePercentile) {\n      return;\n    }\n    const percentile = props.getPricePercentile(checkIn);\n    if (percentile === undefined) {\n      return \"no-price\";\n    }\n    if (percentile >= 0.9) {\n      return \"cost-1\";\n    } else if (percentile > 0.7) {\n      return \"cost-2\";\n    } else if (percentile > 0.3) {\n      return \"cost-3\";\n    } else if (percentile > 0.1) {\n      return \"cost-4\";\n    } else {\n      return \"cost-5\";\n    }\n  }\n};\n","import React, { useState } from \"react\";\nimport {\n  Cell,\n  Column,\n  Table,\n  TableLoadingOption,\n  RenderMode,\n  RowHeaderCell\n} from \"@blueprintjs/table\";\nimport { PriceGridData, StayDates } from \"./types\";\nimport \"./PriceGrid.scss\";\nimport { formatDate, getPriceFromGrid, datesToKey } from \"./utils\";\nimport { HTMLTable } from \"@blueprintjs/core\";\nimport { CheckOutRow } from \"./CheckOutRow\";\nimport { DateRange } from \"@blueprintjs/datetime\";\n\ninterface Props {\n  grid?: PriceGridData;\n  useBlueprintTable: boolean;\n  onSelectSquare: (square: StayDates) => void;\n  dateRange: DateRange;\n}\n\nconst TINT_AFTER_CLICKED = false;\n\nexport const PriceGrid: React.FC<Props> = (props: Props) => {\n  const [selectedSquare, setSelectedSquare] = useState<StayDates | undefined>(\n    undefined\n  );\n  const [hoveredSquare, setHoveredSquare] = useState<StayDates | undefined>(\n    undefined\n  );\n\n  if (props.useBlueprintTable) {\n    return (\n      <Table\n        defaultColumnWidth={85}\n        enableRowResizing={false}\n        enableColumnResizing={false}\n        enableMultipleSelection={false}\n        loadingOptions={\n          !props.grid\n            ? [\n                TableLoadingOption.CELLS,\n                TableLoadingOption.COLUMN_HEADERS,\n                TableLoadingOption.ROW_HEADERS\n              ]\n            : []\n        }\n        renderMode={RenderMode.BATCH}\n        rowHeaderCellRenderer={renderRowHeader}\n        numRows={props.grid ? props.grid.checkInDates.length : 25}\n        defaultRowHeight={25}\n      >\n        {renderColumns()}\n      </Table>\n    );\n  } else {\n    if (!props.grid) {\n      return null;\n    }\n    return (\n      <div className=\"grid\">\n        <div>\n          <p>\n            <i>Check in:</i>\n          </p>\n          <HTMLTable bordered condensed className=\"table-header\">\n            <thead>\n              <CheckOutRow checkInDates={props.grid.checkInDates} />\n            </thead>\n          </HTMLTable>\n          <div className=\"table-container\">\n            <HTMLTable bordered condensed className=\"html-table\">\n              <tbody>{props.grid.checkOutDates.map(renderRow)}</tbody>\n            </HTMLTable>\n          </div>\n        </div>\n        <i className=\"checkout-text\">Check out:</i>\n      </div>\n    );\n  }\n\n  function renderRow(checkOut: string) {\n    if (!props.grid) {\n      return null;\n    }\n    return (\n      <CheckOutRow\n        key={checkOut}\n        checkOut={checkOut}\n        checkInDates={props.grid.checkInDates}\n        getPrice={getPrice(checkOut)}\n        onClick={onSelectSquare(checkOut)}\n        activeCheckIn={getActiveCheckIn(checkOut)}\n        getPricePercentile={getPricePercentile(checkOut)}\n        shouldTint={shouldTintSquare(checkOut)}\n        onHover={onHoverSquare(checkOut)}\n        offHover={onUnhoverSquare()}\n      />\n    );\n  }\n\n  function renderRowHeader(rowIndex: number) {\n    if (props.grid) {\n      return (\n        <RowHeaderCell className=\"row-header\">\n          {formatDate(props.grid.checkInDates[rowIndex]).date}\n        </RowHeaderCell>\n      );\n    }\n    return <RowHeaderCell>{rowIndex}</RowHeaderCell>;\n  }\n\n  function renderColumns() {\n    if (!props.grid) {\n      return <Column />;\n    }\n    return props.grid.checkOutDates.map(checkOut => {\n      return (\n        <Column\n          key={checkOut}\n          name={formatDate(checkOut).date}\n          cellRenderer={cellRenderer(checkOut)}\n        />\n      );\n    });\n  }\n\n  function cellRenderer(checkOut: string) {\n    return (rowIndex: number) => {\n      let priceStr = \"\";\n      if (props.grid) {\n        const checkIn = props.grid.checkInDates[rowIndex];\n        const price = getPriceFromGrid(props.grid, { checkIn, checkOut });\n        if (price !== undefined) {\n          priceStr = `$${price.toLocaleString()}`;\n        }\n      }\n      return <Cell>{priceStr}</Cell>;\n    };\n  }\n\n  function getPrice(checkOut: string) {\n    return (checkIn: string) => {\n      return getPriceFromGrid(props.grid, { checkIn, checkOut });\n    };\n  }\n\n  function onSelectSquare(checkOut: string) {\n    return (checkIn: string) => {\n      if (getPriceFromGrid(props.grid, { checkIn, checkOut }) === undefined) {\n        return;\n      }\n      setSelectedSquare({ checkIn, checkOut });\n      props.onSelectSquare && props.onSelectSquare({ checkIn, checkOut });\n    };\n  }\n\n  function onHoverSquare(checkOut: string) {\n    return (checkIn: string) => setHoveredSquare({ checkIn, checkOut });\n  }\n\n  function onUnhoverSquare() {\n    return () => setHoveredSquare(undefined);\n  }\n\n  function stayOverlaps(selected: StayDates, overlapper: StayDates) {\n    if (selected.checkIn === overlapper.checkIn) {\n      return selected.checkOut >= overlapper.checkOut;\n    }\n    if (selected.checkOut === overlapper.checkOut) {\n      return selected.checkIn <= overlapper.checkIn;\n    }\n    return false;\n  }\n\n  function shouldTintSquare(checkOut: string) {\n    return (checkIn: string): boolean => {\n      const overlapsSelected =\n        selectedSquare && stayOverlaps(selectedSquare, { checkIn, checkOut });\n      const overlapsHovered =\n        hoveredSquare && stayOverlaps(hoveredSquare, { checkIn, checkOut });\n\n      return overlapsHovered || (TINT_AFTER_CLICKED && overlapsSelected);\n    };\n  }\n\n  function getActiveCheckIn(checkOut: string) {\n    if (!TINT_AFTER_CLICKED) {\n      return;\n    }\n    if (!selectedSquare) {\n      return;\n    }\n    if (checkOut === selectedSquare.checkOut) {\n      return selectedSquare.checkIn;\n    }\n  }\n\n  function getPricePercentile(checkOut: string) {\n    return (checkIn: string): number | undefined => {\n      if (!props.grid) {\n        return;\n      }\n      const thisSquare = props.grid.map.get(datesToKey({ checkIn, checkOut }));\n      if (thisSquare !== undefined) {\n        return (thisSquare.rank - 1) / (props.grid.map.size - 1);\n      }\n    };\n  }\n};\n","import { List as ImmutableList } from \"immutable\";\nimport {\n  PriceGridData,\n  Hotel,\n  PricePoint,\n  PricePointWithPrice,\n  StayDates\n} from \"./types\";\n\nexport interface MatrixState {\n  pricePoints: {\n    byDates?: Map<string, PricePointWithPrice[]>;\n    byHotel: Map<string, PricePoint[]>;\n  };\n  grid?: PriceGridData;\n  hotels: ImmutableList<Hotel>;\n  selectedSquare?: StayDates;\n}\n\nexport interface LoadPricesAction {\n  type: \"LOAD_PRICES\";\n  grid: PriceGridData;\n  pricePointsByDates: Map<string, PricePointWithPrice[]>;\n}\n\nexport interface ToggleHotelSelection {\n  type: \"TOGGLE_HOTEL_SELECTION\";\n  hotel: Hotel;\n}\nexport interface SelectSquareAction {\n  type: \"SELECT_SQUARE\";\n  square: StayDates;\n}\n\nexport type Action =\n  | LoadPricesAction\n  | SelectSquareAction\n  | ToggleHotelSelection;\n\nexport function matrixReducer(state: MatrixState, action: Action): MatrixState {\n  switch (action.type) {\n    case \"LOAD_PRICES\":\n      return {\n        ...state,\n        grid: action.grid,\n        pricePoints: {\n          ...state.pricePoints,\n          byDates: action.pricePointsByDates\n        }\n      };\n    case \"SELECT_SQUARE\":\n      return {\n        ...state,\n        selectedSquare: action.square\n      };\n    case \"TOGGLE_HOTEL_SELECTION\":\n      return {\n        ...state,\n        hotels: state.hotels.map(hotel => ({\n          ...hotel,\n          selected:\n            hotel.name === action.hotel.name ? !hotel.selected : hotel.selected\n        }))\n      };\n  }\n}\n","import React, { useState } from \"react\";\nimport { NumberRange, RangeSlider, IRangeSliderProps } from \"@blueprintjs/core\";\nimport \"./Slider.scss\";\n\ninterface Props extends IRangeSliderProps {\n  value: NumberRange;\n  labelSuffix?: string;\n}\n\nexport const Slider: React.FC<Props> = (props: Props) => {\n  const [localValue, setLocalValue] = useState<NumberRange>(props.value);\n  const { value, labelSuffix, ...spreadableProps } = props;\n  return (\n    <div>\n      <RangeSlider\n        className=\"slider\"\n        labelRenderer={label => (\n          <span className=\"no-wrap\">\n            {label.toLocaleString() + (labelSuffix || \"\")}\n          </span>\n        )}\n        labelStepSize={1}\n        stepSize={0.1}\n        {...spreadableProps}\n        value={localValue}\n        onChange={onChange}\n        onRelease={onRelease}\n      />\n    </div>\n  );\n\n  function onRelease(value: NumberRange) {\n    setLocalValue(value);\n    props.onRelease && props.onRelease(value);\n  }\n\n  function onChange(value: NumberRange) {\n    setLocalValue(value);\n    props.onChange && props.onChange(value);\n  }\n};\n","import React, { Fragment } from \"react\";\nimport { Hotel, Bucket } from \"./types\";\nimport { Slider } from \"./Slider\";\nimport { Tooltip, Checkbox, NumberRange } from \"@blueprintjs/core\";\nimport { DateRangeInput, DateRange } from \"@blueprintjs/datetime\";\nimport { stringToDate, hotelIsWithinDistance } from \"./utils\";\nimport \"./Filters.scss\";\n\ninterface Props {\n  bucketedHotels: Bucket<Hotel>[];\n  onChangeDateRange: (newRange: DateRange) => void;\n  onChangeDistanceRange: (newRange: NumberRange) => void;\n  onChangeStayLengthRange: (newRange: NumberRange) => void;\n  onChangeHotelSelection: (hotel: Hotel) => void;\n\n  selectedDistanceRange: NumberRange;\n  maxDistance: number;\n\n  selectedStayLengthRange: NumberRange;\n  maxStayLength: number;\n\n  dateRange: DateRange;\n}\n\nexport const Filters: React.FC<Props> = (props: Props) => {\n  return (\n    <div className=\"filters\">\n      <h3>Filters</h3>\n      <p>Distance from Georgetown</p>\n      <Slider\n        min={0}\n        max={props.maxDistance}\n        value={props.selectedDistanceRange}\n        onRelease={props.onChangeDistanceRange}\n        labelStepSize={5}\n        labelSuffix=\"mi\"\n      />\n      <p className=\"stay-length\">Stay Length</p>\n      <Slider\n        value={props.selectedStayLengthRange}\n        min={1}\n        max={props.maxStayLength}\n        stepSize={1}\n        labelStepSize={2}\n        labelSuffix=\" days\"\n        onRelease={props.onChangeStayLengthRange}\n      />\n      <div className=\"date-range-container\">\n        <DateRangeInput\n          className=\"date-range\"\n          shortcuts={false}\n          formatDate={date => date.toDateString()}\n          parseDate={stringToDate}\n          minDate={props.dateRange[0]}\n          maxDate={props.dateRange[1]}\n          onChange={props.onChangeDateRange}\n        />\n      </div>\n      <div className=\"hotels\">\n        {props.bucketedHotels.map(bucket => (\n          <Fragment key={`${bucket.ceiling}`}>\n            <h4>{`Under ${bucket.ceiling} ${\n              bucket.ceiling === 1 ? \"mile\" : \"miles\"\n            } away`}</h4>\n            {bucket.items.map(hotel => {\n              const outOfRange = !hotelIsWithinDistance(\n                hotel,\n                props.selectedDistanceRange\n              );\n              return (\n                <div key={hotel.name}>\n                  <Tooltip\n                    content=\"Hotel is not in the selected distance range\"\n                    disabled={!outOfRange}\n                  >\n                    <Checkbox\n                      checked={hotel.selected && !outOfRange}\n                      disabled={outOfRange}\n                      onChange={() => props.onChangeHotelSelection(hotel)}\n                      key={hotel.name}\n                      label={hotel.name}\n                    />\n                  </Tooltip>\n                </div>\n              );\n            })}\n          </Fragment>\n        ))}\n      </div>\n    </div>\n  );\n};\n","import { Classes, NumberRange } from \"@blueprintjs/core\";\nimport { List as ImmutableList } from \"immutable\";\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useReducer,\n  useState\n} from \"react\";\nimport { AvailableRooms } from \"./AvailableRooms\";\nimport { PriceGrid } from \"./PriceGrid\";\nimport \"./MarriottMatrix.scss\";\nimport { matrixReducer, MatrixState } from \"./matrixReducer\";\nimport {\n  Bucket,\n  Hotel,\n  PriceGridMap,\n  PricePoint,\n  PricePointWithPrice,\n  StayDates\n} from \"./types\";\nimport {\n  datesToKey,\n  DEFAULT_HOTELS,\n  getLast,\n  hotelIsWithinDistance,\n  dateIsInRange,\n  PricePointMap,\n  pricePointIsWithinStayLengthRange,\n  getStayLength,\n  stringToDate\n} from \"./utils\";\nimport { Filters } from \"./Filters\";\nimport { DateRange } from \"@blueprintjs/datetime\";\nimport classNames from \"classnames\";\n\nfunction sortDates(dates: Set<string>): string[] {\n  return Array.from(dates).sort();\n}\n\ninterface Props {\n  pricePoints: PricePoint[];\n}\n\nfunction createInitialState(props: Props): MatrixState {\n  const hotelToPricePoints = new PricePointMap();\n  const selectedHotelNames = new Set<string>();\n  const hotels: Hotel[] = [];\n  props.pricePoints.forEach(pricePoint => {\n    const name = pricePoint.hotelName;\n\n    hotelToPricePoints.addPricePoint(name, pricePoint);\n\n    if (!selectedHotelNames.has(name)) {\n      selectedHotelNames.add(name);\n      hotels.push({\n        name: name,\n        distance: pricePoint.distance,\n        selected: DEFAULT_HOTELS.includes(name)\n      });\n    }\n  });\n\n  hotels.sort((a, b) => a.distance - b.distance);\n\n  return {\n    pricePoints: {\n      byHotel: hotelToPricePoints\n    },\n    hotels: ImmutableList(hotels)\n  };\n}\n\nexport const MarriottMatrix: React.FC<Props> = (props: Props) => {\n  const [viewingAvailableRooms, setViewingAvailableRooms] = useState(false);\n\n  const [state, dispatch] = useReducer(\n    matrixReducer,\n    createInitialState(props)\n  );\n\n  const [bucketedHotels, nameToHotel, anyHotelsSelected] = useMemo(() => {\n    const hotels = state.hotels;\n    const buckets: Bucket<Hotel>[] = [];\n    const nameToHotel = new Map<string, Hotel>();\n    let anyHotelsSelected = false;\n\n    hotels.forEach(hotel => {\n      nameToHotel.set(hotel.name, hotel);\n      anyHotelsSelected = anyHotelsSelected || hotel.selected;\n      if (\n        buckets.length === 0 ||\n        hotel.distance > buckets[buckets.length - 1].ceiling\n      ) {\n        buckets.push({\n          ceiling: Math.ceil(hotel.distance),\n          items: [hotel]\n        });\n      } else {\n        getLast(buckets).items.push(hotel);\n      }\n    });\n\n    return [buckets, nameToHotel, anyHotelsSelected];\n  }, [state.hotels]);\n\n  const onSelectSquare = useCallback(\n    (square: StayDates) => {\n      setViewingAvailableRooms(true);\n      dispatch({\n        type: \"SELECT_SQUARE\",\n        square\n      });\n    },\n    [setViewingAvailableRooms, dispatch]\n  );\n\n  const [minDate, maxDate, maxStayLength] = useMemo(() => {\n    let minDate = props.pricePoints[0].stayDates.checkIn;\n    let maxDate = props.pricePoints[0].stayDates.checkOut;\n    let maxStayLength = 1;\n    props.pricePoints.forEach(pricePoint => {\n      const { checkIn, checkOut } = pricePoint.stayDates;\n      if (checkIn < minDate) {\n        minDate = checkIn;\n      }\n      if (checkOut > maxDate) {\n        maxDate = checkOut;\n      }\n\n      const stayLength = getStayLength(pricePoint.stayDates);\n      maxStayLength = Math.max(stayLength, maxStayLength);\n    });\n    return [minDate, maxDate, maxStayLength];\n  }, [props.pricePoints]);\n\n  const maxDistance = useMemo(\n    () => state.hotels.last({ distance: 5 }).distance,\n    [state.hotels]\n  );\n\n  const [distanceRange, setDistanceRange] = useState<NumberRange>([\n    0,\n    maxDistance\n  ]);\n  const [dateRange, setDateRange] = useState<DateRange>([\n    stringToDate(minDate),\n    stringToDate(maxDate)\n  ]);\n  const [stayLengthRange, setStayLengthRange] = useState<NumberRange>([\n    1,\n    maxStayLength\n  ]);\n\n  useEffect(() => {\n    const datesToPricePoints = new PricePointMap<PricePointWithPrice>();\n    const priceGridMap = new Map<string, PricePointWithPrice>();\n    const checkInDates = new Set<string>();\n    const checkOutDates = new Set<string>();\n\n    function addPricePointToGrid(pricePoint: PricePoint) {\n      const {\n        hotelName,\n        pricePerNight,\n        soldOut,\n        stayDates: { checkIn, checkOut }\n      } = pricePoint;\n\n      for (const date of [checkIn, checkOut]) {\n        if (!dateIsInRange(date, dateRange)) {\n          return;\n        }\n      }\n\n      checkInDates.add(checkIn);\n      checkOutDates.add(checkOut);\n\n      const hotel = nameToHotel.get(hotelName);\n      if (\n        !hotel ||\n        (anyHotelsSelected && !hotel.selected) ||\n        !hotelIsWithinDistance(hotel, distanceRange) ||\n        !pricePointIsWithinStayLengthRange(\n          pricePoint.stayDates,\n          stayLengthRange\n        )\n      ) {\n        return;\n      }\n\n      if (pricePerNight === null || pricePerNight === undefined || soldOut) {\n        return;\n      }\n\n      const pricePointWithPrice = {\n        ...pricePoint,\n        pricePerNight\n      };\n      const datesString = datesToKey({ checkIn, checkOut });\n      const bestPriceForStay = priceGridMap.get(datesString);\n      if (!bestPriceForStay || pricePerNight < bestPriceForStay.pricePerNight) {\n        priceGridMap.set(datesString, pricePointWithPrice);\n      }\n      datesToPricePoints.addPricePoint(datesString, pricePointWithPrice);\n    }\n\n    if (anyHotelsSelected) {\n      for (const [\n        hotelName,\n        pricePoints\n      ] of state.pricePoints.byHotel.entries()) {\n        const hotelForPricePoint = nameToHotel.get(hotelName);\n        if (\n          hotelForPricePoint &&\n          hotelForPricePoint.selected &&\n          hotelIsWithinDistance(hotelForPricePoint, distanceRange)\n        ) {\n          pricePoints.forEach(pricePoint => {\n            if (\n              pricePointIsWithinStayLengthRange(\n                pricePoint.stayDates,\n                stayLengthRange\n              )\n            ) {\n              addPricePointToGrid(pricePoint);\n            }\n          });\n        }\n      }\n    } else {\n      props.pricePoints.forEach(addPricePointToGrid);\n    }\n\n    // add ranks\n    const sortedPrices = [...priceGridMap.entries()].sort(\n      ([_, a], [__, b]) => a.pricePerNight - b.pricePerNight\n    );\n    const mapWithRanks: PriceGridMap = new Map();\n    sortedPrices.forEach(([dateString, _], i) => {\n      const pricePoint = priceGridMap.get(dateString);\n      if (pricePoint) {\n        mapWithRanks.set(dateString, {\n          ...pricePoint,\n          rank: i + 1\n        });\n      }\n    });\n\n    dispatch({\n      type: \"LOAD_PRICES\",\n      pricePointsByDates: datesToPricePoints,\n      grid: {\n        map: mapWithRanks,\n        checkInDates: sortDates(checkInDates),\n        checkOutDates: sortDates(checkOutDates)\n      }\n    });\n  }, [\n    props.pricePoints,\n    state.hotels,\n    dateRange,\n    distanceRange,\n    stayLengthRange,\n    anyHotelsSelected,\n    nameToHotel,\n    state.pricePoints.byHotel\n  ]);\n\n  return (\n    <div className={classNames(\"container\", Classes.DARK)}>\n      <div className=\"sidebar\">{renderFilters()}</div>\n      <div className=\"content\">\n        <h2>Marriott Matrix</h2>\n        {renderTable()}\n        <AvailableRooms\n          selectedSquare={state.selectedSquare}\n          pricePoints={getPricePointsForStay(state.selectedSquare)}\n          visible={viewingAvailableRooms}\n          onClose={() => setViewingAvailableRooms(false)}\n        />\n      </div>\n    </div>\n  );\n\n  function renderTable() {\n    if (!state.grid) {\n      return null;\n    }\n    return (\n      <PriceGrid\n        grid={state.grid}\n        dateRange={dateRange}\n        useBlueprintTable={false}\n        onSelectSquare={onSelectSquare}\n      />\n    );\n  }\n\n  function renderFilters() {\n    if (!state.grid) {\n      return null;\n    }\n    return (\n      <Filters\n        dateRange={[stringToDate(minDate), stringToDate(maxDate)]}\n        onChangeDateRange={setDateRange}\n        maxDistance={maxDistance}\n        selectedDistanceRange={distanceRange}\n        onChangeDistanceRange={setDistanceRange}\n        maxStayLength={maxStayLength}\n        selectedStayLengthRange={stayLengthRange}\n        onChangeStayLengthRange={setStayLengthRange}\n        bucketedHotels={bucketedHotels}\n        onChangeHotelSelection={hotel => {\n          dispatch({\n            type: \"TOGGLE_HOTEL_SELECTION\",\n            hotel\n          });\n        }}\n      />\n    );\n  }\n\n  function getPricePointsForStay(\n    stay?: StayDates\n  ): PricePointWithPrice[] | undefined {\n    if (!state.grid || !stay || !state.pricePoints.byDates) {\n      return [];\n    }\n    return state.pricePoints.byDates.get(datesToKey(stay));\n  }\n};\n","import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport { MarriottMatrix } from \"./MarriottMatrix\";\nimport prices from \"./prices.json\";\nimport { ScrapedPricePoint, PricePoint } from \"./types\";\nimport moment from \"moment\";\n\nfunction useWindowWidth() {\n  const [width, setWidth] = useState(window.innerWidth);\n\n  useEffect(() => {\n    const handleResize = () => setWidth(window.innerWidth);\n    window.addEventListener(\"resize\", handleResize);\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  });\n\n  return width;\n}\n\nfunction processScrapedPricePoint(pricePoint: ScrapedPricePoint): PricePoint {\n  const [checkIn, checkOut] = pricePoint.dates;\n\n  // TODO: url generation should be on backend\n  let bookingLink: string | undefined = undefined;\n  if (pricePoint.booking_link) {\n    const propertyCodeMatch = pricePoint.booking_link.match(\n      /propertyCode=([A-Z]+)&/\n    );\n    if (propertyCodeMatch === null) {\n      throw Error(\n        \"No property code match in booking link: \" + pricePoint.booking_link\n      );\n    }\n    const propertyCode = propertyCodeMatch[1];\n\n    bookingLink =\n      \"https://www.marriott.com/reservation/availabilitySearch.mi?&propertyCode=\" +\n      propertyCode +\n      \"&fromDate=\" +\n      moment(checkIn).format(\"MM/DD/YYYY\") +\n      \"&toDate=\" +\n      moment(checkOut).format(\"MM/DD/YYYY\") +\n      \"&numberOfRooms=1&numberOfGuests=1&currency=USD\";\n\n    if (pricePoint.corporate_rate) {\n      bookingLink += \"&clusterCode=corp&corporateCode=P5R\";\n    }\n  }\n\n  return {\n    hotelName: pricePoint.name,\n    stayDates: { checkIn, checkOut },\n    corporateRate: pricePoint.corporate_rate,\n    pricePerNight: pricePoint.price_per_night,\n    soldOut: pricePoint.sold_out,\n    distance: pricePoint.distance,\n    bookingLink\n  };\n}\n\nconst App: React.FC = () => {\n  const width = useWindowWidth();\n  if (width < 1000) {\n    return <p className=\"too-small\">Desktop only :-)</p>;\n  }\n  return <MarriottMatrix pricePoints={prices.map(processScrapedPricePoint)} />;\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}